(function(){"use strict";var t={3692:function(t,e,a){var s=a(6369),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",[e("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),e("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),e("h1",{staticClass:"appTitle"},[t._v("My personal costs")]),e("router-view"),e("ModalWindow",{directives:[{name:"show",rawName:"v-show",value:t.showModalWin,expression:"showModalWin"}],staticClass:"modalWin"})],1)},o=[],i=(a(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal"},[e("div",{staticClass:"modal__item modal__item_edit",on:{click:t.onEditClick}},[t._v("Редактировать")]),e("div",{staticClass:"modal__item modal__item_remove",on:{click:t.onRemoveClick}},[t._v("Удалить")]),e("div",{staticClass:"modal__closeBtn",on:{click:t.onCloseClick}},[t._v("Close")])])}),r=[],l={name:"ModalWindow",methods:{onCloseClick(){this.$modal.hide()},onRemoveClick(){this.$modal.remove(),this.onCloseClick()},onEditClick(){this.$modal.edit(),this.onCloseClick()}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,null,null),m=d.exports,h={name:"App",components:{ModalWindow:m},data(){return{modalData:{},showModalWin:!1,modalID:0,modalPos:{}}},methods:{onModalShow(t,e){this.showModalWin=!0,this.modalID=e;const a=t.getBoundingClientRect(),s=document.querySelector(".modalWin"),n=a.right-160,o=a.top+a.height;s.style.left=n+"px",s.style.top=o+"px"},onModalHide(){this.showModalWin=!1},onModalRemove(){this.$store.commit("delPayment",this.modalID)},onModalEdit(){const t=this.$store.getters.getPayment(this.modalID);this.$router.push({name:"editPayment",params:{id:`${t.id}`,date:`${t.date}`,category:`${t.category}`,value:`${t.value}`}})}},created(){const t=[{id:1,date:"20.03.2020",category:"food",value:160},{id:2,date:"21.03.2020",category:"navigation",value:50},{id:3,date:"22.03.2020",category:"sport",value:450},{id:4,date:"23.03.2020",category:"entertiment",value:900},{id:5,date:"24.03.2020",category:"education",value:1500},{id:6,date:"25.03.2020",category:"food",value:200},{id:7,date:"26.03.2020",category:"sport",value:350}];this.$store.dispatch("fetchData",t)},mounted(){this.$modal.EventBus.$on("show",this.onModalShow),this.$modal.EventBus.$on("hide",this.onModalHide),this.$modal.EventBus.$on("remove",this.onModalRemove),this.$modal.EventBus.$on("edit",this.onModalEdit)}},p=h,v=(0,u.Z)(p,n,o,!1,null,null,null),g=v.exports,f=a(3822);s.ZP.use(f.ZP);var _=new f.ZP.Store({state:{categoriesList:["education","entertiment","food","navigation","sport"],paymentsList:[],nextID:0},getters:{getPaymentsList:t=>t.paymentsList,getCategoriesList:t=>t.categoriesList,getPayment:t=>e=>{const a=t.paymentsList.find((t=>t.id==e));return a||null}},mutations:{setPaymentsList:(t,e)=>{t.paymentsList=e,t.nextID=e.length+1},addPayment:(t,e)=>{e.id=t.nextID++,t.paymentsList.push(e)},delPayment:(t,e)=>{const a=t.paymentsList.find((t=>t.id==e));if(!a)return null;{const e=t.paymentsList.indexOf(a);t.paymentsList.splice(e,1)}},editPayment:(t,e)=>{const a=t.paymentsList.find((t=>t.id==e.id));if(!a)return null;{const s=t.paymentsList.indexOf(a);t.paymentsList[s]=e}}},actions:{fetchData({commit:t},e){return new Promise((t=>{setTimeout((()=>{t(e)}),1e3)})).then((e=>{t("setPaymentsList",e)}))}},modules:{}}),y=a(2631),C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"payments"},[e("ShowFormButton",{on:{showForm:t.showForm}}),e("div",{staticClass:"addRefs"},[e("router-link",{staticClass:"addRef",attrs:{to:"/add/payment/sport/200"}},[t._v("sport 200")]),e("router-link",{staticClass:"addRef",attrs:{to:"/add/payment/food/300"}},[t._v("food 300")]),e("router-link",{staticClass:"addRef",attrs:{to:"/add/payment/entertiment/400"}},[t._v("entertiment 400")])],1),e("PaymentsDisplay",{staticClass:"paymentList"})],1)])},P=[],b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list"},[t._m(0),t._l(t.items,(function(a,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:s>=t.minIndex&&s<=t.maxIndex,expression:"index >= minIndex && index <= maxIndex"}],key:s,staticClass:"list__item"},[e("span",{staticClass:"list__number"},[t._v(t._s(s+1))]),e("span",{staticClass:"list__date"},[t._v(t._s(a.date))]),e("span",{staticClass:"list__category"},[t._v(t._s(a.category))]),e("span",{staticClass:"list__value"},[t._v(t._s(a.value))]),e("span",{staticClass:"list__menu",on:{click:function(e){return t.onShowModal(e,a.id)}}},[t._v("⋮")])])})),e("NavPaginator",{staticClass:"navPaginator",attrs:{pagesNum:t.pagesNum,itemsNum:t.itemsNum},on:{changePage:t.changePage}})],2)},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"list__item"},[e("span",{staticClass:"list__number"},[e("b",[t._v("#")])]),e("span",{staticClass:"list__date"},[e("b",[t._v("Date")])]),e("span",{staticClass:"list__category"},[e("b",[t._v("Category")])]),e("span",{staticClass:"list__value"},[e("b",[t._v("Value")])])])}],$=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.pagesNum>1,expression:"pagesNum > 1"}],staticClass:"paginator"},[e("span",{staticClass:"paginator__page",on:{click:t.onPrevPageClick}},[t._v("<")]),t._l(t.pagesNum,(function(a){return e("span",{key:a,staticClass:"paginator__page",on:{click:function(e){return t.onPageClick(a)}}},[t._v(t._s(a))])})),e("span",{staticClass:"paginator__page",on:{click:t.onNextPageClick}},[t._v(">")])],2)},k=[],x={name:"NavPaginator",props:{pagesNum:{type:Number,default(){return 1}},itemsNum:{type:Number,default(){return 0}}},watch:{itemsNum:function(){setTimeout((()=>{this.currentPage=this.pagesNum,this.pageFocus()}),500)}},data(){return{container:null,currentPage:1}},methods:{pageFocus(){const t=this.container.querySelectorAll(".paginator__page");for(const e of t)e.classList.remove("selectPage");this.container.querySelector(`.paginator__page:nth-child(${this.currentPage+1})`).classList.add("selectPage")},onPageClick(t){this.currentPage=t,this.pageFocus(),this.$emit("changePage",this.currentPage)},onPrevPageClick(){this.currentPage>1&&(this.currentPage--,this.pageFocus(),this.$emit("changePage",this.currentPage))},onNextPageClick(){this.currentPage<this.pagesNum&&(this.currentPage++,this.pageFocus(),this.$emit("changePage",this.currentPage))}},mounted(){this.container=document.querySelector(".paginator"),this.currentPage=this.pagesNum,this.pageFocus()},updated(){this.currentPage=this.pagesNum,this.pageFocus()}},N=x,F=(0,u.Z)(N,$,k,!1,null,null,null),L=F.exports,S={name:"PaymentsDisplay",components:{NavPaginator:L},props:{},watch:{items:function(){this.currentPage=this.pagesNum}},data(){return{currentPage:1,recordsInPage:5}},methods:{changePage(t){this.currentPage=t},onShowModal(t,e){this.$modal.show(t.target,e)}},computed:{minIndex(){return(this.currentPage-1)*this.recordsInPage},maxIndex(){return this.minIndex+this.recordsInPage-1},pagesNum(){return Math.ceil(this.items.length/this.recordsInPage)},itemsNum(){return this.items.length},items(){return this.$store.getters.getPaymentsList}},mounted(){this.currentPage=this.pagesNum}},E=S,D=(0,u.Z)(E,b,w,!1,null,null,null),M=D.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"showBtn"},[e("button",{staticClass:"showBtn__button",on:{click:t.onShowClick}},[t._v("ADD NEW COST")])])},B=[],O={name:"ShowFormButton",data(){return{}},methods:{onShowClick(){this.$emit("showForm")}}},Z=O,I=(0,u.Z)(Z,A,B,!1,null,null,null),T=I.exports,j={name:"HomeView",components:{PaymentsDisplay:M,ShowFormButton:T},data(){return{paymentsList:[]}},methods:{showForm(){this.$router.push({name:"addPayment"})},closeForm(){this.formVisible=!1}},mounted(){const t=document.querySelectorAll(".addRef");t.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.$router.push({name:"addPayment",params:{category:t.dataset.category,value:t.dataset.value}})}))}))}},q=j,W=(0,u.Z)(q,C,P,!1,null,null,null),R=W.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"add"},[e("AddPaymentForm",{staticClass:"addForm",attrs:{visible:t.formVisible},on:{addNewPayment:t.addNewPayment,closeForm:t.closeForm}})],1)},H=[],Y=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"form"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"form__select",attrs:{name:"category"},on:{focus:t.onChangeCategory,change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?a:a[0]}}},[e("option",{staticClass:"form__optionTitle",attrs:{selected:"",disabled:"",value:""}},[t._v("Select payment description")]),t._l(t.categories,(function(a,s){return e("option",{key:s,staticClass:"form__option",domProps:{value:a}},[t._v(t._s(a))])}))],2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form__input",attrs:{placeholder:"Payment amount"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form__input",attrs:{placeholder:"Payment date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}}),e("div",{staticClass:"form__buttons"},[e("button",{staticClass:"form__btn",on:{click:t.onCloseClick}},[t._v("CLOSE")]),e("button",{staticClass:"form__btn",on:{click:t.onAddClick}},[t._v("ADD")])])])},z=[],G={name:"AddPaymentForm",props:{visible:{type:Boolean,default(){return!1}}},data(){return{value:"",category:"",date:"",container:null}},methods:{onAddClick(){const t=/^\d+$/,e=/^\d{2}.\d{2}.\d{4}$/;if(!this.category)return void alert("Выберите категорию");if(!t.test(this.value))return void alert("Сумма должна быть задана числом!");if(!e.test(this.date)&&this.date)return void alert("Дата должна быть задана в формате: 'дд.мм.гггг'!");const a={id:0,value:+this.value,category:this.category,date:this.date||this.getCurrenrDate};this.$emit("addNewPayment",a),this.$emit("closeForm")},onCloseClick(){this.$emit("closeForm")},onChangeCategory(){const t=this.container.querySelector(".form__select");t.classList.add("form__select_blackText")}},computed:{getCurrenrDate(){const t=new Date,e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return`${e}.${a}.${s}`},categories(){return this.$store.getters.getCategoriesList}},mounted(){if(this.container=document.querySelector(".form"),this.value=this.$route.params.value,this.$route.params.category){this.category=this.$route.params.category;const t=this.container.querySelector(".form__select");t.classList.add("form__select_blackText")}}},J=G,K=(0,u.Z)(J,Y,z,!1,null,null,null),Q=K.exports,U={name:"AddPaymentPage",components:{AddPaymentForm:Q},data(){return{formVisible:!0}},methods:{addNewPayment(t){this.$store.commit("addPayment",t)},closeForm(){this.$router.push({name:"home"})}}},X=U,tt=(0,u.Z)(X,V,H,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"add"},[e("EditPaymentForm",{staticClass:"addForm",attrs:{visible:t.formVisible},on:{editPayment:t.editPayment,closeForm:t.closeForm}})],1)},st=[],nt=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"form"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"form__select",attrs:{name:"category"},on:{focus:t.onChangeCategory,change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?a:a[0]}}},[e("option",{staticClass:"form__optionTitle",attrs:{selected:"",disabled:"",value:""}},[t._v("Select payment description")]),t._l(t.categories,(function(a,s){return e("option",{key:s,staticClass:"form__option",domProps:{value:a}},[t._v(t._s(a))])}))],2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form__input",attrs:{placeholder:"Payment amount"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form__input",attrs:{placeholder:"Payment date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}}),e("div",{staticClass:"form__buttons"},[e("button",{staticClass:"form__btn",on:{click:t.onCloseClick}},[t._v("CLOSE")]),e("button",{staticClass:"form__btn",on:{click:t.onApplyClick}},[t._v("APPLY")])])])},ot=[],it={name:"EditPaymentForm",props:{visible:{type:Boolean,default(){return!1}}},data(){return{value:"",category:"",date:"",id:0,container:null}},methods:{onApplyClick(){const t=/^\d+$/,e=/^\d{2}.\d{2}.\d{4}$/;if(!this.category)return void alert("Выберите категорию");if(!t.test(this.value))return void alert("Сумма должна быть задана числом!");if(!e.test(this.date)&&this.date)return void alert("Дата должна быть задана в формате: 'дд.мм.гггг'!");const a={id:this.id,value:+this.value,category:this.category,date:this.date||this.getCurrenrDate};this.$emit("editPayment",a),this.$emit("closeForm")},onCloseClick(){this.$emit("closeForm")},onChangeCategory(){const t=this.container.querySelector(".form__select");t.classList.add("form__select_blackText")}},computed:{getCurrenrDate(){const t=new Date,e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return`${e}.${a}.${s}`},categories(){return this.$store.getters.getCategoriesList}},mounted(){this.container=document.querySelector(".form"),this.id=this.$route.params.id,this.date=this.$route.params.date,this.value=this.$route.params.value,this.category=this.$route.params.category}},rt=it,lt=(0,u.Z)(rt,nt,ot,!1,null,null,null),ct=lt.exports,ut={name:"EditPaymentPage",components:{EditPaymentForm:ct},data(){return{formVisible:!0}},methods:{editPayment(t){this.$store.commit("editPayment",t)},closeForm(){this.$router.push({name:"home"})}}},dt=ut,mt=(0,u.Z)(dt,at,st,!1,null,null,null),ht=mt.exports;s.ZP.use(y.ZP);const pt=[{path:"/",name:"home",component:R},{path:"/add/payment/:category?/:value?",name:"addPayment",component:et},{path:"/edit/payment/:id/:date/:category/:value",name:"editPayment",component:ht},{path:"/about",name:"about",component:()=>a.e(686).then(a.bind(a,9686))},{path:"*",name:"error404",component:()=>a.e(294).then(a.bind(a,1294))}],vt=new y.ZP({mode:"history",base:"/",routes:pt});var gt=vt,ft={install(t){this.installed||(this.installed=!0,t.prototype.$modal={EventBus:new t,show(t,e){this.EventBus.$emit("show",t,e)},hide(){this.EventBus.$emit("hide")},remove(){this.EventBus.$emit("remove")},edit(){this.EventBus.$emit("edit")}})}};s.ZP.config.productionTip=!1,s.ZP.use(ft),new s.ZP({template:"<App/>",components:{App:g},store:_,router:gt,render:t=>t(g)}).$mount("#app")}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,o){if(!s){var i=1/0;for(u=0;u<t.length;u++){s=t[u][0],n=t[u][1],o=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(r=!1,o<i&&(i=o));if(r){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,n,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,s){return a.f[s](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{294:"b43ea8b0",686:"f58c2ec8"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="costs:";a.l=function(s,n,o,i){if(t[s])t[s].push(n);else{var r,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==e+o){r=d;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",e+o),r.src=s),t[s]=[n];var m=function(e,a){r.onerror=r.onload=null,clearTimeout(h);var n=t[s];if(delete t[s],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(t){return t(a)})),e)return e(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,s){var n=a.o(t,e)?t[e]:void 0;if(0!==n)if(n)s.push(n[2]);else{var o=new Promise((function(a,s){n=t[e]=[a,s]}));s.push(n[2]=o);var i=a.p+a.u(e),r=new Error,l=function(s){if(a.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var o=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;r.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",r.name="ChunkLoadError",r.type=o,r.request=i,n[1](r)}};a.l(i,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,o,i=s[0],r=s[1],l=s[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var u=l(a)}for(e&&e(s);c<i.length;c++)o=i[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(u)},s=self["webpackChunkcosts"]=self["webpackChunkcosts"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3692)}));s=a.O(s)})();
//# sourceMappingURL=app.b030054d.js.map