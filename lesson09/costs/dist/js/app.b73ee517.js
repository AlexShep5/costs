(function(){"use strict";var t={5106:function(t,e,a){var n=a(144),s=a(998),i=a(6072),r=a(6190),o=a(3059),l=function(){var t=this,e=t._self._c;return e(s.Z,[e(i.Z,{attrs:{flat:"",app:""}},[e(r.Z,{attrs:{color:"#20b2aa",plain:"",ripple:!1,to:"/"}},[t._v("Home")]),e(r.Z,{attrs:{color:"#20b2aa",plain:"",ripple:!1,to:"/about"}},[t._v("About")])],1),e(o.Z,[e("div",{staticClass:"text-h3 text-center my-4"},[t._v("My personal costs")]),e("router-view")],1),e("AddModal"),e("EditModal")],1)},c=[],d=a(9582),u=a(4886),m=a(9930),h=function(){var t=this,e=t._self._c;return e(m.Z,{attrs:{width:"300px"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[e(d.Z,[e("AddPaymentForm",{on:{addNewPayment:t.addNewPayment}}),e(u.h7,[e(r.Z,{staticClass:"addModal__closeBtn",attrs:{color:"teal",dark:"",ripple:!1,width:"50%"},on:{click:function(e){return t.$modal.hide({name:"add"})}}},[t._v("Close")])],1)],1)],1)},p=[],g=a(2034),f=a(7808),v=function(){var t=this,e=t._self._c;return e(d.Z,{staticClass:"addForm"},[e(g.Z,{staticClass:"addForm__select",attrs:{label:"Category",items:t.categories},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),e(f.Z,{staticClass:"addForm__input",attrs:{label:"Value"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e(f.Z,{staticClass:"addForm__input",attrs:{label:"Date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),e(r.Z,{staticClass:"addForm__btn",attrs:{color:"teal",dark:""},on:{click:t.onAddClick}},[t._v("Add")])],1)},y=[],_={name:"AddPaymentForm",data(){return{value:"",category:"",date:"",container:null}},methods:{onAddClick(){const t=/^\d+$/,e=/^\d{2}.\d{2}.\d{4}$/;if(!this.category)return void alert("Выберите категорию");if(!t.test(this.value))return void alert("Сумма должна быть задана числом!");if(!e.test(this.date)&&this.date)return void alert("Дата должна быть задана в формате: 'дд.мм.гггг'!");const a={id:0,value:+this.value,category:this.category,date:this.date||this.getCurrenrDate};this.$emit("addNewPayment",a)},onChangeCategory(){const t=this.container.querySelector(".addForm__select");t.classList.add("addForm__select_blackText")}},computed:{getCurrenrDate(){const t=new Date;return t.toLocaleDateString()},categories(){return this.$store.getters.getCategoriesList}},mounted(){if(this.container=document.querySelector(".addForm"),this.value=this.$route.params.value,this.$route.params.category){this.category=this.$route.params.category;const t=this.container.querySelector(".addForm__select");t.classList.add("addForm__select_blackText")}}},P=_,C=a(1001),w=(0,C.Z)(P,v,y,!1,null,null,null),b=w.exports,k={name:"AddModal",components:{AddPaymentForm:b},data(){return{isShow:!1,name:"add"}},methods:{show(t){t.name==this.name&&(this.isShow=!0)},hide(t){t.name==this.name&&(this.isShow=!1)},addNewPayment(t){this.$store.commit("addPayment",t)}},mounted(){this.$modal.EventBus.$on("modalShow",this.show),this.$modal.EventBus.$on("modalHide",this.hide)}},x=k,Z=(0,C.Z)(x,h,p,!1,null,null,null),F=Z.exports,N=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"editModal",attrs:{width:"300px"}},[e(d.Z,{attrs:{flat:""}},[t.isFormShow?t._e():e("div",{staticClass:"editModal__item editModal__item_edit",on:{click:t.onEditClick}},[t._v("Редактировать")]),t.isFormShow?t._e():e("div",{staticClass:"editModal__item editModal__item_remove",on:{click:t.onRemoveClick}},[t._v("Удалить")]),e("EditPaymentForm",{directives:[{name:"show",rawName:"v-show",value:t.isFormShow,expression:"isFormShow"}],staticClass:"editModal__form",attrs:{payData:t.settings.payItem},on:{editPayment:t.onEditPayment}}),e(u.h7,[e(r.Z,{staticClass:"editModal__closeBtn",attrs:{color:"teal",dark:"",ripple:!1,width:"50%"},on:{click:function(e){return t.$modal.hide({name:"edit"})}}},[t._v("Close")])],1)],1)],1)])},$=[],D=function(){var t=this,e=t._self._c;return e(d.Z,{staticClass:"editForm"},[e(g.Z,{staticClass:"editForm__select",attrs:{label:"Category",items:t.categories},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),e(f.Z,{staticClass:"editForm__input",attrs:{label:"Value"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e(f.Z,{staticClass:"editForm__input",attrs:{label:"Date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),e(r.Z,{staticClass:"editForm__btn",attrs:{color:"teal",dark:""},on:{click:t.onApplyClick}},[t._v("Apply")])],1)},S=[],L={name:"EditPaymentForm",props:{payData:{type:Object,default(){return{}}}},watch:{payData:function(){this.value=this.payData.value,this.date=this.payData.date,this.category=this.payData.category,this.id=this.payData.id}},data(){return{value:0,category:"",date:"",id:0,container:null}},methods:{onApplyClick(){const t=/^\d+$/,e=/^\d{2}.\d{2}.\d{4}$/;if(!this.category)return void alert("Выберите категорию");if(!t.test(this.value))return void alert("Сумма должна быть задана числом!");if(!e.test(this.date))return void alert("Дата должна быть задана в формате: 'дд.мм.гггг'!");const a={id:this.id,value:+this.value,category:this.category,date:this.date};this.$emit("editPayment",a)}},computed:{categories(){return this.$store.getters.getCategoriesList}},mounted(){this.container=document.querySelector(".editForm")}},A=L,E=(0,C.Z)(A,D,S,!1,null,null,null),O=E.exports,I={name:"EditModal",components:{EditPaymentForm:O},data(){return{isShow:!1,name:"edit",settings:{},isFormShow:!1}},methods:{show(t){if(t.name==this.name){this.settings=t;const e=this.settings.elm.getBoundingClientRect(),a=document.querySelector(".editModal"),n=e.right-250,s=e.top+e.height-5;a.style.left=n+"px",a.style.top=s+"px",this.isFormShow=!1,this.isShow=!0}},hide(t){t.name==this.name&&(this.isShow=!1,this.settings={})},onRemoveClick(){this.$store.commit("delPayment",this.settings.payItem.id),this.$modal.hide({name:"edit"})},onEditClick(){this.isFormShow=!0},onEditPayment(t){this.$store.commit("editPayment",t)}},mounted(){this.$modal.EventBus.$on("modalShow",this.show),this.$modal.EventBus.$on("modalHide",this.hide)}},M=I,B=(0,C.Z)(M,N,$,!1,null,null,null),j=B.exports,T={name:"App",components:{AddModal:F,EditModal:j},data(){return{modalData:{},modalID:0,modalPos:{}}},created(){const t=[{id:1,date:"20.03.2020",category:"food",value:350},{id:2,date:"21.03.2020",category:"navigation",value:400},{id:3,date:"22.03.2020",category:"sport",value:500},{id:4,date:"23.03.2020",category:"entertiment",value:800},{id:5,date:"24.03.2020",category:"education",value:1e3},{id:6,date:"25.03.2020",category:"food",value:200},{id:7,date:"26.03.2020",category:"sport",value:350}];this.$store.dispatch("fetchData",t)}},q=T,R=(0,C.Z)(q,l,c,!1,null,null,null),H=R.exports,V=(a(7658),a(629));n.ZP.use(V.ZP);var U=new V.ZP.Store({state:{categoriesList:["education","entertiment","food","navigation","sport"],paymentsList:[],nextID:0},getters:{getPaymentsList:t=>t.paymentsList,getCategoriesList:t=>t.categoriesList,getPayment:t=>e=>{const a=t.paymentsList.find((t=>t.id==e));return a||null},getCategoryPay:t=>{const e=[];return t.categoriesList.forEach((a=>{const n=t.paymentsList.reduce(((t,e)=>a==e.category?t+e.value:t),0);e.push(n)})),e}},mutations:{setPaymentsList:(t,e)=>{t.paymentsList=e,t.nextID=e.length+1},addPayment:(t,e)=>{e.id=t.nextID++,t.paymentsList.push(e)},delPayment:(t,e)=>{const a=t.paymentsList.find((t=>t.id==e));if(!a)return null;{const e=t.paymentsList.indexOf(a);t.paymentsList.splice(e,1)}},editPayment:(t,e)=>{const a=t.paymentsList.find((t=>t.id==e.id));if(!a)return null;{const s=t.paymentsList.indexOf(a);n.ZP.set(t.paymentsList,s,e)}}},actions:{fetchData({commit:t},e){return new Promise((t=>{setTimeout((()=>{t(e)}),1e3)})).then((e=>{t("setPaymentsList",e)}))}},modules:{}}),K=a(8345),W=a(266),z=a(2150),G=a(4324),J=a(1713),Q=function(){var t=this,e=t._self._c;return e(z.Z,[e(J.Z,[e(W.Z,{attrs:{cols:6}},[e(r.Z,{attrs:{color:"teal",dark:""},on:{click:function(e){return t.$modal.show({name:"add"})}}},[t._v(" ADD NEW COST "),e(G.Z,[t._v("mdi-plus")])],1),e("div",{staticClass:"mt-1"},[e(r.Z,{attrs:{color:"#20b2aa",plain:"",ripple:!1,to:"/add/payment/sport/200"}},[t._v("sport 200")]),e(r.Z,{attrs:{color:"#20b2aa",plain:"",ripple:!1,to:"/add/payment/food/300"}},[t._v("food 300")]),e(r.Z,{attrs:{color:"#20b2aa",plain:"",ripple:!1,to:"/add/payment/entertiment/400"}},[t._v("entertiment 400")])],1),e("PaymentsDisplay",{staticClass:"paymentList"})],1),e(W.Z,{attrs:{cols:6}},[e("RoundChart",{staticClass:"chart",attrs:{"chart-data":t.chartData,"chart-options":t.chartOptions}})],1)],1)],1)},X=[],Y=a(9449),tt=function(){var t=this,e=t._self._c;return e(z.Z,{staticClass:"list"},[e(Y.Z,{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",{staticClass:"list__item"},[e("th",{staticClass:"text-left"},[e("b",[t._v("#")])]),e("th",{staticClass:"text-left"},[e("b",[t._v("Date")])]),e("th",{staticClass:"text-left"},[e("b",[t._v("Category")])]),e("th",{staticClass:"text-left"},[e("b",[t._v("Value")])]),e("th",{staticClass:"text-left"})])]),e("tbody",t._l(t.items,(function(a,n){return e("tr",{directives:[{name:"show",rawName:"v-show",value:n>=t.minIndex&&n<=t.maxIndex,expression:"index >= minIndex && index <= maxIndex"}],key:n,staticClass:"list__item"},[e("td",[t._v(t._s(n+1))]),e("td",[t._v(t._s(a.date))]),e("td",[t._v(t._s(a.category))]),e("td",[t._v(t._s(a.value))]),e("td",{staticClass:"list__menu",on:{click:function(e){return t.$modal.show({name:"edit",elm:e.target,payItem:a})}}},[t._v("⋮")])])})),0)]},proxy:!0}])}),e("NavPaginator",{staticClass:"navPaginator",attrs:{pagesNum:t.pagesNum,itemsNum:t.itemsNum},on:{changePage:t.changePage}})],1)},et=[],at=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.pagesNum>1,expression:"pagesNum > 1"}],staticClass:"paginator"},[e("span",{staticClass:"paginator__page",on:{click:t.onPrevPageClick}},[t._v("<")]),t._l(t.pagesNum,(function(a){return e("span",{key:a,staticClass:"paginator__page",on:{click:function(e){return t.onPageClick(a)}}},[t._v(t._s(a))])})),e("span",{staticClass:"paginator__page",on:{click:t.onNextPageClick}},[t._v(">")])],2)},nt=[],st={name:"NavPaginator",props:{pagesNum:{type:Number,default(){return 1}},itemsNum:{type:Number,default(){return 0}}},watch:{itemsNum:function(t,e){t>e&&setTimeout((()=>{this.currentPage=this.pagesNum,this.pageFocus()}),500)}},data(){return{container:null,currentPage:1}},methods:{pageFocus(){const t=this.container.querySelectorAll(".paginator__page");for(const e of t)e.classList.remove("selectPage");this.container.querySelector(`.paginator__page:nth-child(${this.currentPage+1})`).classList.add("selectPage")},onPageClick(t){this.currentPage=t,this.pageFocus(),this.$emit("changePage",this.currentPage)},onPrevPageClick(){this.currentPage>1&&(this.currentPage--,this.pageFocus(),this.$emit("changePage",this.currentPage))},onNextPageClick(){this.currentPage<this.pagesNum&&(this.currentPage++,this.pageFocus(),this.$emit("changePage",this.currentPage))}},mounted(){this.container=document.querySelector(".paginator"),this.currentPage=this.pagesNum,this.pageFocus()},updated(){this.currentPage=this.pagesNum,this.pageFocus()}},it=st,rt=(0,C.Z)(it,at,nt,!1,null,null,null),ot=rt.exports,lt={name:"PaymentsDisplay",components:{NavPaginator:ot},props:{},watch:{itemsNum:function(t,e){(t>e||this.currentPage>this.pagesNum)&&(this.currentPage=this.pagesNum)}},data(){return{currentPage:1,recordsInPage:5}},methods:{changePage(t){this.currentPage=t}},computed:{minIndex(){return(this.currentPage-1)*this.recordsInPage},maxIndex(){return this.minIndex+this.recordsInPage-1},pagesNum(){return Math.ceil(this.items.length/this.recordsInPage)},itemsNum(){return this.items.length},items(){return this.$store.getters.getPaymentsList}},mounted(){this.currentPage=this.pagesNum}},ct=lt,dt=(0,C.Z)(ct,tt,et,!1,null,null,null),ut=dt.exports,mt=function(){var t=this,e=t._self._c;return e("Doughnut",{attrs:{"chart-data":t.chartData,"chart-options":t.chartOptions,height:250}})},ht=[],pt=a(7889),gt=a(6300);gt.kL.register(gt.Dx,gt.u,gt.De,gt.ZL,gt.uw,gt.f$,gt.qi);var ft={name:"RoundChart",components:{Doughnut:pt.$I},props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}}},data(){return{}}},vt=ft,yt=(0,C.Z)(vt,mt,ht,!1,null,null,null),_t=yt.exports,Pt={name:"HomeView",components:{PaymentsDisplay:ut,RoundChart:_t},watch:{categoryPay:function(){this.chartUpdate()}},data(){return{paymentsList:[],chartData:{labels:[],datasets:[{label:"Data One",backgroundColor:["#E57373","#F06292","#BA68C8","#9575CD","#7986CB","#64B5F6","#4FC3F7","#4DD0E1","#4DB6AC"],data:[40,20,12,50,15]}]},chartOptions:{animation:!1,responsive:!1,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}}},methods:{chartUpdate(){this.chartData.labels=this.$store.getters.getCategoriesList,this.chartData.datasets[0].data=this.$store.getters.getCategoryPay}},computed:{categoryPay(){return this.$store.getters.getCategoryPay}},mounted(){const t=document.querySelectorAll(".addRef");t.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.$router.push({name:"addPayment",params:{category:t.dataset.category,value:t.dataset.value}})}))})),this.chartUpdate()}},Ct=Pt,wt=(0,C.Z)(Ct,Q,X,!1,null,null,null),bt=wt.exports,kt=function(){var t=this,e=t._self._c;return e(d.Z,{staticClass:"addPage",attrs:{flat:""}},[e("AddPaymentForm",{staticClass:"addPage__form",on:{addNewPayment:t.addNewPayment}}),e(u.h7,[e(r.Z,{staticClass:"addPage__closeBtn",attrs:{color:"teal",dark:"",ripple:!1,width:"50%"},on:{click:t.onCloseClick}},[t._v("Close")])],1)],1)},xt=[],Zt={name:"AddPaymentPage",components:{AddPaymentForm:b},data(){return{formVisible:!0}},methods:{addNewPayment(t){this.$store.commit("addPayment",t),this.$router.push({name:"home"})},onCloseClick(){this.$router.push({name:"home"})}}},Ft=Zt,Nt=(0,C.Z)(Ft,kt,xt,!1,null,null,null),$t=Nt.exports;n.ZP.use(K.ZP);const Dt=[{path:"/",name:"home",component:bt},{path:"/add/payment/:category?/:value?",name:"addPayment",component:$t},{path:"/about",name:"about",component:()=>a.e(507).then(a.bind(a,5507))},{path:"*",name:"error404",component:()=>a.e(777).then(a.bind(a,7777))}],St=new K.ZP({mode:"history",base:"/",routes:Dt});var Lt=St,At={install(t){this.installed||(this.installed=!0,t.prototype.$modal={EventBus:new t,show(t){this.EventBus.$emit("modalShow",t)},hide(t){this.EventBus.$emit("modalHide",t)}})}},Et=a(1705);n.ZP.use(Et.Z);var Ot=new Et.Z({});n.ZP.config.productionTip=!1,n.ZP.use(At),new n.ZP({template:"<App/>",components:{App:H},store:U,router:Lt,vuetify:Ot,render:t=>t(H)}).$mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,i){if(!n){var r=1/0;for(d=0;d<t.length;d++){n=t[d][0],s=t[d][1],i=t[d][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,n){return a.f[n](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{507:"fa1bbb9e",777:"8104c340"}[t]+".js"}}(),function(){a.miniCssF=function(t){return"css/"+t+".5b8a1d3d.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="costs:";a.l=function(n,s,i,r){if(t[n])t[n].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==e+i){o=u;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",e+i),o.src=n),t[n]=[s];var m=function(e,a){o.onerror=o.onload=null,clearTimeout(h);var s=t[n];if(delete t[n],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((function(t){return t(a)})),e)return e(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t=function(t,e,a,n){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var i=function(i){if(s.onerror=s.onload=null,"load"===i.type)a();else{var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,s.parentNode.removeChild(s),n(l)}};return s.onerror=s.onload=i,s.href=e,document.head.appendChild(s),s},e=function(t,e){for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var s=a[n],i=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===t||i===e))return s}var r=document.getElementsByTagName("style");for(n=0;n<r.length;n++){s=r[n],i=s.getAttribute("data-href");if(i===t||i===e)return s}},n=function(n){return new Promise((function(s,i){var r=a.miniCssF(n),o=a.p+r;if(e(r,o))return s();t(n,o,s,i)}))},s={143:0};a.f.miniCss=function(t,e){var a={507:1};s[t]?e.push(s[t]):0!==s[t]&&a[t]&&e.push(s[t]=n(t).then((function(){s[t]=0}),(function(e){throw delete s[t],e})))}}(),function(){var t={143:0};a.f.j=function(e,n){var s=a.o(t,e)?t[e]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise((function(a,n){s=t[e]=[a,n]}));n.push(s[2]=i);var r=a.p+a.u(e),o=new Error,l=function(n){if(a.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",o.name="ChunkLoadError",o.type=i,o.request=r,s[1](o)}};a.l(r,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,i,r=n[0],o=n[1],l=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var d=l(a)}for(e&&e(n);c<r.length;c++)i=r[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},n=self["webpackChunkcosts"]=self["webpackChunkcosts"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(5106)}));n=a.O(n)})();
//# sourceMappingURL=app.b73ee517.js.map