(function(){"use strict";var t={998:function(t,e,a){var n=a(6369),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",[e("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),e("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),e("h1",{staticClass:"appTitle"},[t._v("My personal costs")]),e("router-view")],1)},i=[],o={name:"App",data(){return{modalData:{},modalID:0,modalPos:{}}},created(){const t=[{id:1,date:"20.03.2020",category:"food",value:160},{id:2,date:"21.03.2020",category:"navigation",value:50},{id:3,date:"22.03.2020",category:"sport",value:450},{id:4,date:"23.03.2020",category:"entertiment",value:900},{id:5,date:"24.03.2020",category:"education",value:1500},{id:6,date:"25.03.2020",category:"food",value:200},{id:7,date:"26.03.2020",category:"sport",value:350}];this.$store.dispatch("fetchData",t)}},r=o,l=a(1001),d=(0,l.Z)(r,s,i,!1,null,null,null),u=d.exports,c=(a(7658),a(3822));n.ZP.use(c.ZP);var m=new c.ZP.Store({state:{categoriesList:["education","entertiment","food","navigation","sport"],paymentsList:[],nextID:0},getters:{getPaymentsList:t=>t.paymentsList,getCategoriesList:t=>t.categoriesList,getPayment:t=>e=>{const a=t.paymentsList.find((t=>t.id==e));return a||null}},mutations:{setPaymentsList:(t,e)=>{t.paymentsList=e,t.nextID=e.length+1},addPayment:(t,e)=>{e.id=t.nextID++,t.paymentsList.push(e)},delPayment:(t,e)=>{const a=t.paymentsList.find((t=>t.id==e));if(!a)return null;{const e=t.paymentsList.indexOf(a);t.paymentsList.splice(e,1)}},editPayment:(t,e)=>{const a=t.paymentsList.find((t=>t.id==e.id));if(!a)return null;{const s=t.paymentsList.indexOf(a);n.ZP.set(t.paymentsList,s,e)}}},actions:{fetchData({commit:t},e){return new Promise((t=>{setTimeout((()=>{t(e)}),1e3)})).then((e=>{t("setPaymentsList",e)}))}},modules:{}}),h=a(2631),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"payments"},[e("ShowFormButton"),e("div",{staticClass:"addRefs"},[e("router-link",{staticClass:"addRef",attrs:{to:"/add/payment/sport/200"}},[t._v("sport 200")]),e("router-link",{staticClass:"addRef",attrs:{to:"/add/payment/food/300"}},[t._v("food 300")]),e("router-link",{staticClass:"addRef",attrs:{to:"/add/payment/entertiment/400"}},[t._v("entertiment 400")])],1),e("PaymentsDisplay",{staticClass:"paymentList"})],1),e("AddModal"),e("EditModal")],1)},v=[],g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list"},[t._m(0),t._l(t.items,(function(a,n){return e("div",{directives:[{name:"show",rawName:"v-show",value:n>=t.minIndex&&n<=t.maxIndex,expression:"index >= minIndex && index <= maxIndex"}],key:n,staticClass:"list__item"},[e("span",{staticClass:"list__number"},[t._v(t._s(n+1))]),e("span",{staticClass:"list__date"},[t._v(t._s(a.date))]),e("span",{staticClass:"list__category"},[t._v(t._s(a.category))]),e("span",{staticClass:"list__value"},[t._v(t._s(a.value))]),e("span",{staticClass:"list__menu",on:{click:function(e){return t.$modal.show({name:"edit",elm:e.target,payItem:a})}}},[t._v("⋮")])])})),e("NavPaginator",{staticClass:"navPaginator",attrs:{pagesNum:t.pagesNum,itemsNum:t.itemsNum},on:{changePage:t.changePage}})],2)},f=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"list__item"},[e("span",{staticClass:"list__number"},[e("b",[t._v("#")])]),e("span",{staticClass:"list__date"},[e("b",[t._v("Date")])]),e("span",{staticClass:"list__category"},[e("b",[t._v("Category")])]),e("span",{staticClass:"list__value"},[e("b",[t._v("Value")])])])}],_=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.pagesNum>1,expression:"pagesNum > 1"}],staticClass:"paginator"},[e("span",{staticClass:"paginator__page",on:{click:t.onPrevPageClick}},[t._v("<")]),t._l(t.pagesNum,(function(a){return e("span",{key:a,staticClass:"paginator__page",on:{click:function(e){return t.onPageClick(a)}}},[t._v(t._s(a))])})),e("span",{staticClass:"paginator__page",on:{click:t.onNextPageClick}},[t._v(">")])],2)},y=[],P={name:"NavPaginator",props:{pagesNum:{type:Number,default(){return 1}},itemsNum:{type:Number,default(){return 0}}},watch:{itemsNum:function(t,e){t>e&&setTimeout((()=>{this.currentPage=this.pagesNum,this.pageFocus()}),500)}},data(){return{container:null,currentPage:1}},methods:{pageFocus(){const t=this.container.querySelectorAll(".paginator__page");for(const e of t)e.classList.remove("selectPage");this.container.querySelector(`.paginator__page:nth-child(${this.currentPage+1})`).classList.add("selectPage")},onPageClick(t){this.currentPage=t,this.pageFocus(),this.$emit("changePage",this.currentPage)},onPrevPageClick(){this.currentPage>1&&(this.currentPage--,this.pageFocus(),this.$emit("changePage",this.currentPage))},onNextPageClick(){this.currentPage<this.pagesNum&&(this.currentPage++,this.pageFocus(),this.$emit("changePage",this.currentPage))}},mounted(){this.container=document.querySelector(".paginator"),this.currentPage=this.pagesNum,this.pageFocus()},updated(){this.currentPage=this.pagesNum,this.pageFocus()}},C=P,w=(0,l.Z)(C,_,y,!1,null,null,null),b=w.exports,k={name:"PaymentsDisplay",components:{NavPaginator:b},props:{},watch:{itemsNum:function(t,e){t>e&&(this.currentPage=this.pagesNum)}},data(){return{currentPage:1,recordsInPage:5}},methods:{changePage(t){this.currentPage=t}},computed:{minIndex(){return(this.currentPage-1)*this.recordsInPage},maxIndex(){return this.minIndex+this.recordsInPage-1},pagesNum(){return Math.ceil(this.items.length/this.recordsInPage)},itemsNum(){return this.items.length},items(){return this.$store.getters.getPaymentsList}},mounted(){this.currentPage=this.pagesNum}},x=k,N=(0,l.Z)(x,g,f,!1,null,null,null),F=N.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"showBtn"},[e("button",{staticClass:"showBtn__button",on:{click:function(e){return t.$modal.show({name:"add"})}}},[t._v("ADD NEW COST")])])},$=[],L={name:"ShowFormButton"},A=L,E=(0,l.Z)(A,S,$,!1,null,null,null),D=E.exports,M=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"addModal"},[e("AddPaymentForm",{on:{addNewPayment:t.addNewPayment}}),e("div",{staticClass:"addModal__closeBtn",on:{click:function(e){return t.$modal.hide({name:"add"})}}},[t._v("Close")])],1)},Z=[],I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"addForm"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"addForm__select",attrs:{name:"category"},on:{focus:t.onChangeCategory,change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?a:a[0]}}},[e("option",{staticClass:"addForm__optionTitle",attrs:{selected:"",disabled:"",value:""}},[t._v("Payment description")]),t._l(t.categories,(function(a,n){return e("option",{key:n,staticClass:"addForm__option",domProps:{value:a}},[t._v(t._s(a))])}))],2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"addForm__input",attrs:{placeholder:"Payment amount"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"addForm__input",attrs:{placeholder:"Payment date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}}),e("button",{staticClass:"addForm__btn",on:{click:t.onAddClick}},[t._v("Add")])])},O=[],B={name:"AddPaymentForm",data(){return{value:"",category:"",date:"",container:null}},methods:{onAddClick(){const t=/^\d+$/,e=/^\d{2}.\d{2}.\d{4}$/;if(!this.category)return void alert("Выберите категорию");if(!t.test(this.value))return void alert("Сумма должна быть задана числом!");if(!e.test(this.date)&&this.date)return void alert("Дата должна быть задана в формате: 'дд.мм.гггг'!");const a={id:0,value:+this.value,category:this.category,date:this.date||this.getCurrenrDate};this.$emit("addNewPayment",a)},onChangeCategory(){const t=this.container.querySelector(".addForm__select");t.classList.add("addForm__select_blackText")}},computed:{getCurrenrDate(){const t=new Date;return t.toLocaleDateString()},categories(){return this.$store.getters.getCategoriesList}},mounted(){if(this.container=document.querySelector(".addForm"),this.value=this.$route.params.value,this.$route.params.category){this.category=this.$route.params.category;const t=this.container.querySelector(".addForm__select");t.classList.add("addForm__select_blackText")}}},T=B,j=(0,l.Z)(T,I,O,!1,null,null,null),q=j.exports,R={name:"AddModal",components:{AddPaymentForm:q},data(){return{isShow:!1,name:"add"}},methods:{show(t){t.name==this.name&&(this.isShow=!0)},hide(t){t.name==this.name&&(this.isShow=!1)},addNewPayment(t){this.$store.commit("addPayment",t)}},mounted(){this.$modal.EventBus.$on("modalShow",this.show),this.$modal.EventBus.$on("modalHide",this.hide)}},H=R,V=(0,l.Z)(H,M,Z,!1,null,null,null),W=V.exports,z=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"editModal"},[t.isFormShow?t._e():e("div",{staticClass:"editModal__item editModal__item_edit",on:{click:t.onEditClick}},[t._v("Редактировать")]),t.isFormShow?t._e():e("div",{staticClass:"editModal__item editModal__item_remove",on:{click:t.onRemoveClick}},[t._v("Удалить")]),e("EditPaymentForm",{directives:[{name:"show",rawName:"v-show",value:t.isFormShow,expression:"isFormShow"}],staticClass:"editModal__form",attrs:{payData:t.settings.payItem},on:{editPayment:t.onEditPayment}}),e("div",{staticClass:"editModal__closeBtn",on:{click:function(e){return t.$modal.hide({name:"edit"})}}},[t._v("Close")])],1)},G=[],J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editForm"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"editForm__select",attrs:{name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?a:a[0]}}},[e("option",{staticClass:"editForm__optionTitle",attrs:{selected:"",disabled:"",value:""}},[t._v("Select payment description")]),t._l(t.categories,(function(a,n){return e("option",{key:n,staticClass:"editForm__option",domProps:{value:a}},[t._v(t._s(a))])}))],2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"editForm__input",attrs:{placeholder:"Payment amount"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"editForm__input",attrs:{placeholder:"Payment date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}}),e("button",{staticClass:"editForm__btn",on:{click:t.onApplyClick}},[t._v("Apply")])])},K=[],Q={name:"EditPaymentForm",props:{payData:{type:Object,default(){return{}}}},watch:{payData:function(){this.value=this.payData.value,this.date=this.payData.date,this.category=this.payData.category,this.id=this.payData.id}},data(){return{value:0,category:"",date:"",id:0,container:null}},methods:{onApplyClick(){const t=/^\d+$/,e=/^\d{2}.\d{2}.\d{4}$/;if(!this.category)return void alert("Выберите категорию");if(!t.test(this.value))return void alert("Сумма должна быть задана числом!");if(!e.test(this.date))return void alert("Дата должна быть задана в формате: 'дд.мм.гггг'!");const a={id:this.id,value:+this.value,category:this.category,date:this.date};this.$emit("editPayment",a)}},computed:{categories(){return this.$store.getters.getCategoriesList}},mounted(){this.container=document.querySelector(".editForm")}},U=Q,X=(0,l.Z)(U,J,K,!1,null,null,null),Y=X.exports,tt={name:"EditModal",components:{EditPaymentForm:Y},data(){return{isShow:!1,name:"edit",settings:{},isFormShow:!1}},methods:{show(t){if(t.name==this.name){this.settings=t;const e=this.settings.elm.getBoundingClientRect(),a=document.querySelector(".editModal"),n=e.right-250,s=e.top+e.height;a.style.left=n+"px",a.style.top=s+"px",this.isFormShow=!1,this.isShow=!0}},hide(t){t.name==this.name&&(this.isShow=!1,this.settings={})},onRemoveClick(){this.$store.commit("delPayment",this.settings.payItem.id),this.$modal.hide({name:"edit"})},onEditClick(){this.isFormShow=!0},onEditPayment(t){this.$store.commit("editPayment",t)}},mounted(){this.$modal.EventBus.$on("modalShow",this.show),this.$modal.EventBus.$on("modalHide",this.hide)}},et=tt,at=(0,l.Z)(et,z,G,!1,null,null,null),nt=at.exports,st={name:"HomeView",components:{PaymentsDisplay:F,ShowFormButton:D,AddModal:W,EditModal:nt},data(){return{paymentsList:[]}},methods:{},mounted(){const t=document.querySelectorAll(".addRef");t.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.$router.push({name:"addPayment",params:{category:t.dataset.category,value:t.dataset.value}})}))}))}},it=st,ot=(0,l.Z)(it,p,v,!1,null,null,null),rt=ot.exports,lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"addPage"},[e("AddPaymentForm",{staticClass:"addPage__form",on:{addNewPayment:t.addNewPayment}}),e("div",{staticClass:"addPage__closeBtn",on:{click:t.onCloseClick}},[t._v("Close")])],1)},dt=[],ut={name:"AddPaymentPage",components:{AddPaymentForm:q},data(){return{formVisible:!0}},methods:{addNewPayment(t){this.$store.commit("addPayment",t),this.$router.push({name:"home"})},onCloseClick(){this.$router.push({name:"home"})}}},ct=ut,mt=(0,l.Z)(ct,lt,dt,!1,null,null,null),ht=mt.exports;n.ZP.use(h.ZP);const pt=[{path:"/",name:"home",component:rt},{path:"/add/payment/:category?/:value?",name:"addPayment",component:ht},{path:"/about",name:"about",component:()=>a.e(686).then(a.bind(a,9686))},{path:"*",name:"error404",component:()=>a.e(294).then(a.bind(a,1294))}],vt=new h.ZP({mode:"history",base:"/",routes:pt});var gt=vt,ft={install(t){this.installed||(this.installed=!0,t.prototype.$modal={EventBus:new t,show(t){this.EventBus.$emit("modalShow",t)},hide(t){this.EventBus.$emit("modalHide",t)}})}};n.ZP.config.productionTip=!1,n.ZP.use(ft),new n.ZP({template:"<App/>",components:{App:u},store:m,router:gt,render:t=>t(u)}).$mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,i){if(!n){var o=1/0;for(u=0;u<t.length;u++){n=t[u][0],s=t[u][1],i=t[u][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(u--,1);var d=s();void 0!==d&&(e=d)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,n){return a.f[n](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{294:"b43ea8b0",686:"f58c2ec8"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="costs:";a.l=function(n,s,i,o){if(t[n])t[n].push(s);else{var r,l;if(void 0!==i)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==e+i){r=c;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",e+i),r.src=n),t[n]=[s];var m=function(e,a){r.onerror=r.onload=null,clearTimeout(h);var s=t[n];if(delete t[n],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(t){return t(a)})),e)return e(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,n){var s=a.o(t,e)?t[e]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise((function(a,n){s=t[e]=[a,n]}));n.push(s[2]=i);var o=a.p+a.u(e),r=new Error,l=function(n){if(a.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;r.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,s[1](r)}};a.l(o,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,i,o=n[0],r=n[1],l=n[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var u=l(a)}for(e&&e(n);d<o.length;d++)i=o[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},n=self["webpackChunkcosts"]=self["webpackChunkcosts"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(998)}));n=a.O(n)})();
//# sourceMappingURL=app.1b7e7546.js.map